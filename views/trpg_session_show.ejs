<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="view" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <meta charset="UTF-8">
    <title>TRPG Character Sheet Maker</title>
    <link href="/public/css/Main.css" rel="stylesheet" type="text/css" media="all"/>
    <script src="../public/js/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>

    <script src="/public/js/button.js" charset="UTF-8"></script>


</head>
<body style="margin:0;background-color:#E0E0E0">

<nav>
    <div class="topic">TRPG角卡創建</div>
    <li class="menu btn" id="btn" onclick="get('/')">首頁</li>
    <li class="menu btn" onclick="get('/about')">關於</li>
    <li class="menu btn logged_in" onclick="get('/trpgsession')"style="visibility: hidden">團務</li>
    <li class="menu btn logged_in" onclick="get('/charactersheet')"style="visibility: hidden">角色卡管理</li>
    <li class="menu btn adminpost" onclick="get('/adminpost')" style="visibility: hidden">管理員貼文</li>
    <div class="submenu">
        <button class="subbtn btn validation" id="login" >登入</button>
        <button class="subbtn btn validation" id="signup" >註冊</button>
    </div>

    <div class="message" style="top: 24px;"></div>
</nav>
<div class="content">
    <h1 style="text-align: center;line-height:40px ;"><%=title%></h1>
    <form id="upload-sheet-form">
    <div id="upload-window" style="top: 24px;display: none" >
        <div>
            <% for(var j=0;j<sheet_name.length;j++) { %>
                <label style="display: inline"><%= sheet_name[j] %> 系統:<%=system[j]%><input type="checkbox" name="upload" style="display: inline" value="<%=sheet_id[j]%>"></label><br>
            <% }%>
            <button type="submit" id="upload-check">上傳</button>
            <button id="upload-disable">取消</button>
        </div>
    </div>
    </form>
    <div style="text-align: center">
            <% if (content[1] == null ) { %>
                <%  content.push('你還沒有玩家') %>
        <% }%>
        <div>gm:<%=content[0]%></div>
        player:
            <% for(var i=1;i<content.length;i++) { %>
                <div style="display: inline"><%= content[i] %></div><br>
        <% }%>
        <br>
    <button id="delete" class="btn session"><%=dismiss%></button>
    <button id="upload" class="btn session">上傳角卡</button>

    </div>
</div>
<script>
    $('#upload').click(function () {
        $('#upload-window').css('display','block');
    })
    $('#upload-disable').click(function () {
        $('#upload-window').css('display','none');
    })
    $('#upload-sheet-form').submit(function (e) {
        e.preventDefault();
        console.log($(this).serializeArray())
        /*$.ajax({
            url: '../api/delete/<%=url%>',
            type: 'GET',
            success:function(data){
                message(data)
                setTimeout(function(){
                    redirect('/trpgsession')
                },1000)
            },
            error:function(data){
                message(data.responseText)
            },
        });*/
    })
    $('#delete').click(function (e) {
        e.preventDefault();

        $.ajax({
            url: '../api/delete/<%=url%>',
            type: 'GET',
            success:function(data){
                message(data)
                setTimeout(function(){
                    redirect('/trpgsession')
                },1000)
            },
            error:function(data){
                message(data.responseText)
            },
        });
    })
</script>
<div class="new_pusher"></div>
<div class="footer">
    Copyright © 2020 ItisCaleb & Kulimi. All rights reserved.
</div>
</body>
</html>
